<section class="users-page">
  <div class="users-toolbar">
    <app-back-button fallbackUrl="/admin"></app-back-button>
  </div>

  <header class="users-hero">
    <p class="eyebrow">{{ 'users.list.eyebrow' | translate }}</p>
    <h1>{{ 'users.list.title' | translate }}</h1>
    <p>{{ 'users.list.description' | translate }}</p>
  </header>

  <section class="users-stats" *ngIf="metrics$ | async as metrics">
    <article class="stat-card">
      <p>{{ 'users.list.metrics.total' | translate }}</p>
      <h3>{{ metrics.total }}</h3>
    </article>
    <article class="stat-card">
      <p>{{ 'users.list.metrics.active' | translate }}</p>
      <h3>{{ metrics.active }}</h3>
    </article>
    <article class="stat-card">
      <p>{{ 'users.list.metrics.pending' | translate }}</p>
      <h3>{{ metrics.pending }}</h3>
    </article>
  </section>

  <section class="users-grid" *ngIf="users$ | async as users; else emptyState">
    <article class="user-card" *ngFor="let user of users; trackBy: trackByUser">
      <div class="user-card__header">
        <div class="avatar">{{ getInitials(user) }}</div>
        <div class="user-meta">
          <h3>{{ user.firstName }} {{ user.lastName }}</h3>
          <p>{{ user.email }}</p>
        </div>
        <span class="status-chip" [class.inactive]="!user.active">
          {{
            user.active
              ? ('users.list.status.active' | translate)
              : ('users.list.status.inactive' | translate)
          }}
        </span>
      </div>
      <div class="user-roles">
        <span class="role-chip" *ngFor="let role of user.roles">{{ role }}</span>
      </div>
      <div class="user-card__footer">
        <span class="user-id">{{ user.id }}</span>
        <a class="btn btn-text" [routerLink]="[user.id]">
          {{ 'users.list.actions.view' | translate }}
          <lucide-icon name="ArrowRight" size="16"></lucide-icon>
        </a>
      </div>
    </article>
  </section>
</section>

<ng-template #emptyState>
  <div class="empty-state">
    <p>{{ 'users.list.empty' | translate }}</p>
  </div>
</ng-template>
