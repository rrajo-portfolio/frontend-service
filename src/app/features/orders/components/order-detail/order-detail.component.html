<ng-container *ngIf="order$ | async as order">
  <section class="order-detail">
    <mat-card class="summary-card">
      <mat-card-title>{{ 'order.detail.title' | translate }}</mat-card-title>
      <mat-card-subtitle>
        {{ 'orders.table.status' | translate }}:
        <span class="status-chip" [ngClass]="order.status.toLowerCase()">
          {{ order.status }}
        </span>
      </mat-card-subtitle>
      <mat-card-content>
        <div class="summary-grid">
          <div>
            <p class="label">{{ 'order.detail.customer' | translate }}</p>
            <p class="value">
              {{ order.userName || ('order.detail.userFallback' | translate) }}
            </p>
            <small *ngIf="order.userEmail">{{ order.userEmail }}</small>
          </div>
          <div>
            <p class="label">{{ 'order.detail.total' | translate }}</p>
            <p class="value">{{ order.totalAmount | currency: order.currency }}</p>
            <small>{{ 'order.detail.created' | translate }} {{ order.createdAt | date: 'medium' }}</small>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="items-card">
      <mat-card-title>{{ 'order.detail.items' | translate }}</mat-card-title>
      <mat-card-content>
        <mat-list>
          <mat-list-item *ngFor="let item of order.lineItems">
            <div class="item-line">
              <div>
                <p class="item-name">
                  {{ item.productName || ('order.detail.productFallback' | translate) }}
                </p>
              </div>
              <div class="item-meta">
                <span>{{ 'order.detail.quantity' | translate }}: {{ item.quantity }}</span>
                <span>{{ 'order.detail.price' | translate }}: {{ item.price | currency: order.currency }}</span>
              </div>
            </div>
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>
  </section>
</ng-container>
