<section class="catalog-container">
  <div class="page-header">
    <div>
      <p class="eyebrow">{{ 'catalog.eyebrow' | translate }}</p>
      <h2>{{ 'catalog.title' | translate }}</h2>
      <p>{{ 'catalog.description' | translate }}</p>
    </div>
    <div class="page-header__actions">
      <a
        class="btn btn-secondary"
        *ngIf="isCatalogAdmin"
        routerLink="/catalog/manage"
      >
        <lucide-icon name="Settings" size="18"></lucide-icon>
        {{ 'catalog.admin.manage' | translate }}
      </a>
      <button class="btn btn-primary" type="button" (click)="loadProducts()">
        <lucide-icon name="RefreshCw" size="18"></lucide-icon>
        {{ 'catalog.refresh' | translate }}
      </button>
    </div>
  </div>

  <app-product-search (search)="loadProducts($event)"></app-product-search>

  <div class="products-grid" *ngIf="products$ | async as products; else empty">
    <app-product-card
      *ngFor="let product of products"
      [product]="product"
      [canEdit]="isCatalogAdmin"
      [canAddToCart]="canUseCart"
      (edit)="editProduct($event)"
      (addCart)="addToCart($event)"
      (details)="openDetails($event)"
    ></app-product-card>
  </div>

  <ng-template #empty>
    <div class="empty-state">
      <p>{{ 'catalog.emptyState' | translate }}</p>
      <button class="btn btn-secondary" type="button" (click)="loadProducts()">
        {{ 'catalog.clearSearch' | translate }}
      </button>
    </div>
  </ng-template>

  <div class="product-modal" *ngIf="selectedProduct">
    <div class="product-modal__backdrop" (click)="closeDetails()"></div>
    <div class="product-modal__dialog">
      <app-product-detail
        [product]="selectedProduct"
        displayMode="modal"
        (close)="closeDetails()"
      ></app-product-detail>
    </div>
  </div>
</section>
