import{a as Y}from"./chunk-RZBAA2NC.js";import{a as Z}from"./chunk-4EOHQ6L3.js";import{b as tt,c as et}from"./chunk-XO7O2M7B.js";import{a as X}from"./chunk-XBRHJR42.js";import{c as W}from"./chunk-2666AO3O.js";import"./chunk-EMWOT3NJ.js";import{a as pt}from"./chunk-437U45AM.js";import"./chunk-HBN5ZDUM.js";import{$ as x,A as v,Aa as J,B as O,Ba as E,D as P,Da as Q,E as h,H as $,N as n,O as S,Pb as T,Q as g,S as u,T as B,Tb as it,Ub as nt,V as o,Vb as ot,W as r,Wb as rt,X as C,Y as R,Z as U,_ as y,aa as s,bb as V,ea as K,fa as a,g as z,ga as f,ha as p,lc as at,mc as ct,oa as d,p as F,pa as m,qa as M,r as A,sa as H,xa as q,y as I,ya as w,za as G}from"./chunk-PRE4TB56.js";function mt(e,i){if(e&1&&(o(0,"mat-card",1)(1,"mat-card-title"),a(2),r(),o(3,"mat-card-subtitle"),a(4),d(5,"date"),r(),o(6,"mat-card-content")(7,"p"),a(8),r(),o(9,"p",2),a(10),d(11,"currency"),r(),o(12,"div",3)(13,"span"),a(14),r(),o(15,"span"),a(16),r()()()()),e&2){let t=s();n(2),f(t.product.name),n(2),p(" Ultima actualizacion: ",M(5,6,t.product.updatedAt||t.product.createdAt,"medium")," "),n(4),f(t.product.description),n(2),p(" Precio: ",M(11,9,t.product.price,t.product.currency)," "),n(4),p("ID: ",t.product.id,""),n(2),p("Tags: ",t.product.tags.join(", "),"")}}var b=class e{product;static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-product-detail"]],inputs:{product:"product"},decls:1,vars:1,consts:[["class","detail-card",4,"ngIf"],[1,"detail-card"],[1,"price"],[1,"meta"]],template:function(t,c){t&1&&g(0,mt,17,12,"mat-card",0),t&2&&u("ngIf",c.product)},dependencies:[w,it,ot,rt,nt,E,J],styles:[".detail-card[_ngcontent-%COMP%]{margin-top:1.5rem;border-radius:24px;border:1px solid rgba(15,23,42,.06);box-shadow:0 15px 35px #0f172a14}.detail-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.3rem}.detail-card[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:700;margin:1rem 0;color:#0f172a}.detail-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem;color:#475569}.detail-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem}"]})};var k=class e{term$=new z;search=new $;constructor(){this.term$.pipe(F(300),A()).subscribe(i=>this.search.emit(i))}onSearch(i){this.term$.next(i)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-product-search"]],outputs:{search:"search"},decls:3,vars:0,consts:[[1,"search-panel"],["name","Search","size","18"],["type","search","placeholder","Buscar por nombre, SKU o tag...",3,"input"]],template:function(t,c){t&1&&(o(0,"div",0),C(1,"lucide-icon",1),o(2,"input",2),x("input",function(_){return c.onSearch(_.target.value)}),r()())},dependencies:[T],styles:[".search-panel[_ngcontent-%COMP%]{width:100%;border:1px solid #e5e7eb;border-radius:16px;padding:12px 16px;display:flex;align-items:center;gap:12px;background:#fff;box-shadow:0 2px 8px #0f172a14}.search-panel[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;font-size:1rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;outline:none;color:#374151}"]})};function _t(e,i){if(e&1&&(R(0),a(1),U()),e&2){let t=s(2).$implicit;n(),p(" +",t.tags.length-2," ")}}function xt(e,i){if(e&1&&(o(0,"span"),a(1),g(2,_t,2,1,"ng-container",17),r()),e&2){let t=s().$implicit;n(),p(" ",t.tags.slice(0,2).join(", ")," "),n(),u("ngIf",t.tags.length>2)}}function Ct(e,i){if(e&1){let t=y();o(0,"button",21),x("click",function(l){P(t);let _=s().$implicit,j=s(2);return h(j.addToCart(_,l))}),C(1,"lucide-icon",22),a(2),d(3,"translate"),r()}e&2&&(n(2),p(" ",m(3,1,"catalog.addToCart")," "))}function vt(e,i){if(e&1){let t=y();o(0,"article",11),x("click",function(){let l=P(t).$implicit,_=s(2);return h(_.onProductSelected(l))}),o(1,"div",12)(2,"div")(3,"p",13),a(4),r(),o(5,"h3"),a(6),r()(),o(7,"span",14),a(8),r()(),o(9,"p",15),a(10),d(11,"translate"),r(),o(12,"div",16)(13,"span"),a(14),d(15,"currency"),r(),g(16,xt,3,2,"span",17),r(),g(17,Ct,4,3,"button",18),o(18,"button",19),a(19),d(20,"translate"),C(21,"lucide-icon",20),r()()}if(e&2){let t=i.$implicit,c=s(2);B("selected",t.id===(c.selectedProduct==null?null:c.selectedProduct.id)),n(4),p("SKU ",t.sku,""),n(2),f(t.name),n(),B("active",t.status==="ACTIVE"),n(),p(" ",t.status," "),n(2),p(" ",t.description||m(11,12,"catalog.noDescription")," "),n(4),f(M(15,14,t.price,t.currency||"USD")),n(2),u("ngIf",t.tags==null?null:t.tags.length),n(),u("ngIf",c.canUseCart),n(2),p(" ",m(20,17,"catalog.viewDetails")," ")}}function Pt(e,i){if(e&1&&(o(0,"div",9),g(1,vt,22,19,"article",10),r()),e&2){let t=i.ngIf;n(),u("ngForOf",t)}}function ht(e,i){if(e&1){let t=y();o(0,"div",23)(1,"p"),a(2),d(3,"translate"),r(),o(4,"button",21),x("click",function(){P(t);let l=s();return h(l.loadProducts())}),a(5),d(6,"translate"),r()()}e&2&&(n(2),f(m(3,2,"catalog.emptyState")),n(3),p(" ",m(6,4,"catalog.clearSearch")," "))}function St(e,i){if(e&1&&C(0,"app-product-detail",24),e&2){let t=s();u("product",t.selectedProduct)}}var L=class e{constructor(i,t,c,l,_){this.catalogService=i;this.cartService=t;this.notificationService=c;this.authService=l;this.translationService=_}products$;selectedProduct;canUseCart=!1;ngOnInit(){this.canUseCart=this.authService.hasRole("user"),this.loadProducts()}loadProducts(i){this.products$=i&&i.trim().length?this.catalogService.searchProducts(i.trim()):this.catalogService.getProducts()}onProductSelected(i){this.selectedProduct=i}addToCart(i,t){t?.stopPropagation(),this.cartService.addProduct(i),this.notificationService.success(this.translationService.translate("catalog.toast.added"))}static \u0275fac=function(t){return new(t||e)(S(Y),S(Z),S(X),S(W),S(tt))};static \u0275cmp=v({type:e,selectors:[["app-product-list"]],decls:22,vars:17,consts:[["empty",""],[1,"catalog-container"],[1,"page-header"],[1,"eyebrow"],["type","button",1,"btn","btn-primary",3,"click"],["name","RefreshCw","size","18"],[3,"search"],["class","products-grid",4,"ngIf","ngIfElse"],[3,"product",4,"ngIf"],[1,"products-grid"],["class","product-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"product-card",3,"click"],[1,"card-head"],[1,"sku"],[1,"badge","badge-status"],[1,"description"],[1,"meta"],[4,"ngIf"],["class","btn btn-secondary","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-text"],["name","ArrowRight","size","16"],["type","button",1,"btn","btn-secondary",3,"click"],["name","ShoppingCart","size","16"],[1,"empty-state"],[3,"product"]],template:function(t,c){if(t&1){let l=y();o(0,"section",1)(1,"div",2)(2,"div")(3,"p",3),a(4),d(5,"translate"),r(),o(6,"h2"),a(7),d(8,"translate"),r(),o(9,"p"),a(10),d(11,"translate"),r()(),o(12,"button",4),x("click",function(){return P(l),h(c.loadProducts())}),C(13,"lucide-icon",5),a(14),d(15,"translate"),r()(),o(16,"app-product-search",6),x("search",function(j){return P(l),h(c.loadProducts(j))}),r(),g(17,Pt,2,1,"div",7),d(18,"async"),g(19,ht,7,6,"ng-template",null,0,H)(21,St,1,1,"app-product-detail",8),r()}if(t&2){let l=K(20);n(4),f(m(5,7,"catalog.eyebrow")),n(3),f(m(8,9,"catalog.title")),n(3),f(m(11,11,"catalog.description")),n(4),p(" ",m(15,13,"catalog.refresh")," "),n(3),u("ngIf",m(18,15,c.products$))("ngIfElse",l),n(4),u("ngIf",c.selectedProduct)}},dependencies:[q,w,T,b,k,G,E,et],styles:[".catalog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;padding:24px 0 48px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.2em;font-size:.75rem;color:#6b7280}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:4px 0;font-size:clamp(28px,4vw,36px)}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6b7280}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}.product-card[_ngcontent-%COMP%]{border-radius:16px;border:1px solid #f3f4f6;background:#fff;padding:20px;display:flex;flex-direction:column;gap:12px;transition:all .25s ease;cursor:pointer}.product-card[_ngcontent-%COMP%]:hover, .product-card.selected[_ngcontent-%COMP%]{border-color:#bfdbfe;box-shadow:0 8px 20px #0f172a1f}.product-card[_ngcontent-%COMP%]   .card-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px}.product-card[_ngcontent-%COMP%]   .card-head[_ngcontent-%COMP%]   .sku[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.75rem;color:#9ca3af;letter-spacing:.2em;margin:0 0 4px}.product-card[_ngcontent-%COMP%]   .card-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.product-card[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#4b5563;flex:1}.product-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#6b7280;font-size:.875rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;border-radius:16px;border:1px dashed #e5e7eb;color:#4b5563}@media (max-width: 768px){.product-card[_ngcontent-%COMP%]{padding:16px}}"]})};var bt=[{path:"",component:L},{path:":id",component:b}],N=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=O({type:e});static \u0275inj=I({imports:[V.forChild(bt),V]})};var lt=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=O({type:e});static \u0275inj=I({imports:[Q,pt,at,ct,N]})};export{lt as CatalogModule};
