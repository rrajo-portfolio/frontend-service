import{a as Y}from"./chunk-XK3HE3PP.js";import{a as Z}from"./chunk-LAMJ2ZX6.js";import{a as X}from"./chunk-5545PIR5.js";import{c as W}from"./chunk-RAB63YMJ.js";import"./chunk-TO4NHBEA.js";import{a as ct}from"./chunk-4DONFFHM.js";import"./chunk-HBN5ZDUM.js";import{$ as d,$a as j,A as _,B as O,Ba as Q,D as C,E as x,G as R,M as c,N as b,Nb as E,P as m,R as l,Rb as tt,S as V,Sb as et,Tb as nt,U as i,Ub as it,V as o,W as g,X as $,Y as U,Z as S,_ as u,da as B,ea as r,fa as P,g as A,ga as s,jc as ot,kc as rt,na as v,oa as q,p as F,pa as y,r as z,ra as K,va as H,wa as I,xa as G,y as M,ya as J,za as w}from"./chunk-XZKYCDIA.js";function st(e,n){if(e&1&&(i(0,"mat-card",1)(1,"mat-card-title"),r(2),o(),i(3,"mat-card-subtitle"),r(4),v(5,"date"),o(),i(6,"mat-card-content")(7,"p"),r(8),o(),i(9,"p",2),r(10),v(11,"currency"),o(),i(12,"div",3)(13,"span"),r(14),o(),i(15,"span"),r(16),o()()()()),e&2){let t=d();c(2),P(t.product.name),c(2),s(" Ultima actualizacion: ",y(5,6,t.product.updatedAt||t.product.createdAt,"medium")," "),c(4),P(t.product.description),c(2),s(" Precio: ",y(11,9,t.product.price,t.product.currency)," "),c(4),s("ID: ",t.product.id,""),c(2),s("Tags: ",t.product.tags.join(", "),"")}}var h=class e{product;static \u0275fac=function(t){return new(t||e)};static \u0275cmp=_({type:e,selectors:[["app-product-detail"]],inputs:{product:"product"},decls:1,vars:1,consts:[["class","detail-card",4,"ngIf"],[1,"detail-card"],[1,"price"],[1,"meta"]],template:function(t,a){t&1&&m(0,st,17,12,"mat-card",0),t&2&&l("ngIf",a.product)},dependencies:[I,tt,nt,it,et,w,J],styles:[".detail-card[_ngcontent-%COMP%]{margin-top:1.5rem;border-radius:24px;border:1px solid rgba(15,23,42,.06);box-shadow:0 15px 35px #0f172a14}.detail-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.3rem}.detail-card[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:700;margin:1rem 0;color:#0f172a}.detail-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem;color:#475569}.detail-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem}"]})};var L=class e{term$=new A;search=new R;constructor(){this.term$.pipe(F(300),z()).subscribe(n=>this.search.emit(n))}onSearch(n){this.term$.next(n)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=_({type:e,selectors:[["app-product-search"]],outputs:{search:"search"},decls:3,vars:0,consts:[[1,"search-panel"],["name","Search","size","18"],["type","search","placeholder","Buscar por nombre, SKU o tag...",3,"input"]],template:function(t,a){t&1&&(i(0,"div",0),g(1,"lucide-icon",1),i(2,"input",2),u("input",function(f){return a.onSearch(f.target.value)}),o()())},dependencies:[E],styles:[".search-panel[_ngcontent-%COMP%]{width:100%;border:1px solid #e5e7eb;border-radius:16px;padding:12px 16px;display:flex;align-items:center;gap:12px;background:#fff;box-shadow:0 2px 8px #0f172a14}.search-panel[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;font-size:1rem;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;outline:none;color:#374151}"]})};function ft(e,n){if(e&1&&($(0),r(1),U()),e&2){let t=d(2).$implicit;c(),s(" +",t.tags.length-2," ")}}function gt(e,n){if(e&1&&(i(0,"span"),r(1),m(2,ft,2,1,"ng-container",17),o()),e&2){let t=d().$implicit;c(),s(" ",t.tags.slice(0,2).join(", ")," "),c(),l("ngIf",t.tags.length>2)}}function _t(e,n){if(e&1){let t=S();i(0,"button",21),u("click",function(p){C(t);let f=d().$implicit,N=d(2);return x(N.addToCart(f,p))}),g(1,"lucide-icon",22),r(2," A\xF1adir al carrito "),o()}}function Ct(e,n){if(e&1){let t=S();i(0,"article",11),u("click",function(){let p=C(t).$implicit,f=d(2);return x(f.onProductSelected(p))}),i(1,"div",12)(2,"div")(3,"p",13),r(4),o(),i(5,"h3"),r(6),o()(),i(7,"span",14),r(8),o()(),i(9,"p",15),r(10),o(),i(11,"div",16)(12,"span"),r(13),v(14,"currency"),o(),m(15,gt,3,2,"span",17),o(),m(16,_t,3,0,"button",18),i(17,"button",19),r(18," Ver detalles "),g(19,"lucide-icon",20),o()()}if(e&2){let t=n.$implicit,a=d(2);V("selected",t.id===(a.selectedProduct==null?null:a.selectedProduct.id)),c(4),s("SKU ",t.sku,""),c(2),P(t.name),c(),V("active",t.status==="ACTIVE"),c(),s(" ",t.status," "),c(2),s(" ",t.description||"Sin descripci\xC3\xB3n proporcionada."," "),c(3),P(y(14,11,t.price,t.currency||"USD")),c(2),l("ngIf",t.tags==null?null:t.tags.length),c(),l("ngIf",a.canUseCart)}}function xt(e,n){if(e&1&&(i(0,"div",9),m(1,Ct,20,14,"article",10),o()),e&2){let t=n.ngIf;c(),l("ngForOf",t)}}function Pt(e,n){if(e&1){let t=S();i(0,"div",23)(1,"p"),r(2,"No se encontraron productos con ese criterio."),o(),i(3,"button",21),u("click",function(){C(t);let p=d();return x(p.loadProducts())}),r(4," Limpiar b\xC3\xBAsqueda "),o()()}}function vt(e,n){if(e&1&&g(0,"app-product-detail",24),e&2){let t=d();l("product",t.selectedProduct)}}var k=class e{constructor(n,t,a,p){this.catalogService=n;this.cartService=t;this.notificationService=a;this.authService=p}products$;selectedProduct;canUseCart=!1;ngOnInit(){this.canUseCart=this.authService.hasRole("user"),this.loadProducts()}loadProducts(n){this.products$=n&&n.trim().length?this.catalogService.searchProducts(n.trim()):this.catalogService.getProducts()}onProductSelected(n){this.selectedProduct=n}addToCart(n,t){t?.stopPropagation(),this.cartService.addProduct(n),this.notificationService.success("Producto a\xF1adido al carrito")}static \u0275fac=function(t){return new(t||e)(b(Y),b(Z),b(X),b(W))};static \u0275cmp=_({type:e,selectors:[["app-product-list"]],decls:18,vars:5,consts:[["empty",""],[1,"catalog-container"],[1,"page-header"],[1,"eyebrow"],["type","button",1,"btn","btn-primary",3,"click"],["name","RefreshCw","size","18"],[3,"search"],["class","products-grid",4,"ngIf","ngIfElse"],[3,"product",4,"ngIf"],[1,"products-grid"],["class","product-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"product-card",3,"click"],[1,"card-head"],[1,"sku"],[1,"badge","badge-status"],[1,"description"],[1,"meta"],[4,"ngIf"],["class","btn btn-secondary","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-text"],["name","ArrowRight","size","16"],["type","button",1,"btn","btn-secondary",3,"click"],["name","ShoppingCart","size","16"],[1,"empty-state"],[3,"product"]],template:function(t,a){if(t&1){let p=S();i(0,"section",1)(1,"div",2)(2,"div")(3,"p",3),r(4,"Inventario activo"),o(),i(5,"h2"),r(6,"Cat\xE1logo de productos"),o(),i(7,"p"),r(8,"Consulta el inventario publicado por catalog-service y verifica precios, estado y etiquetas."),o()(),i(9,"button",4),u("click",function(){return C(p),x(a.loadProducts())}),g(10,"lucide-icon",5),r(11," Refrescar "),o()(),i(12,"app-product-search",6),u("search",function(N){return C(p),x(a.loadProducts(N))}),o(),m(13,xt,2,1,"div",7),v(14,"async"),m(15,Pt,5,0,"ng-template",null,0,K)(17,vt,1,1,"app-product-detail",8),o()}if(t&2){let p=B(16);c(13),l("ngIf",q(14,3,a.products$))("ngIfElse",p),c(4),l("ngIf",a.selectedProduct)}},dependencies:[H,I,E,h,L,G,w],styles:[".catalog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;padding:24px 0 48px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.2em;font-size:.75rem;color:#6b7280}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:4px 0;font-size:clamp(28px,4vw,36px)}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6b7280}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}.product-card[_ngcontent-%COMP%]{border-radius:16px;border:1px solid #f3f4f6;background:#fff;padding:20px;display:flex;flex-direction:column;gap:12px;transition:all .25s ease;cursor:pointer}.product-card[_ngcontent-%COMP%]:hover, .product-card.selected[_ngcontent-%COMP%]{border-color:#bfdbfe;box-shadow:0 8px 20px #0f172a1f}.product-card[_ngcontent-%COMP%]   .card-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px}.product-card[_ngcontent-%COMP%]   .card-head[_ngcontent-%COMP%]   .sku[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.75rem;color:#9ca3af;letter-spacing:.2em;margin:0 0 4px}.product-card[_ngcontent-%COMP%]   .card-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.product-card[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#4b5563;flex:1}.product-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#6b7280;font-size:.875rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;border-radius:16px;border:1px dashed #e5e7eb;color:#4b5563}@media (max-width: 768px){.product-card[_ngcontent-%COMP%]{padding:16px}}"]})};var ht=[{path:"",component:k},{path:":id",component:h}],D=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=O({type:e});static \u0275inj=M({imports:[j.forChild(ht),j]})};var pt=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=O({type:e});static \u0275inj=M({imports:[Q,ct,ot,rt,D]})};export{pt as CatalogModule};
