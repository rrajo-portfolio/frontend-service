import{a as le}from"./chunk-RZBAA2NC.js";import{a as F}from"./chunk-B4X2TKTK.js";import{c as z}from"./chunk-XO7O2M7B.js";import{a as de}from"./chunk-XBRHJR42.js";import{c as U}from"./chunk-2666AO3O.js";import{a as pe}from"./chunk-IJGKFE4C.js";import"./chunk-EMWOT3NJ.js";import{a as De}from"./chunk-437U45AM.js";import"./chunk-HBN5ZDUM.js";import{$ as v,$a as me,$b as ve,A as I,Aa as D,Ac as Ne,B as N,Ba as $,Bc as Ae,Ca as V,Cc as Le,D as b,Da as ne,Dc as Te,E as O,N as n,O as _,Pb as ue,Q as g,R as Z,S as p,Sb as fe,T as ee,Ta as oe,Tb as j,Ua as ae,Ub as G,V as i,Vb as R,W as r,Wa as se,Wb as ge,X as C,Xb as _e,Y as te,Ya as ce,Z as ie,Zb as xe,_ as y,_b as w,aa as u,ac as Ce,bb as W,cc as he,dc as be,ec as Oe,fa as a,fc as ye,g as k,ga as c,gc as Se,ha as f,hc as Me,ia as h,ic as Ie,j as K,jc as Pe,kc as Ee,mc as Fe,na as re,nc as we,oa as d,oc as ke,pa as l,qa as S,ra as A,u as Y,v as M,wa as L,xa as P,y as B,ya as E,za as T,zc as Be}from"./chunk-PRE4TB56.js";var He=o=>[o];function Xe(o,t){o&1&&(i(0,"a",23),C(1,"lucide-icon",24),a(2),d(3,"translate"),r()),o&2&&(n(2),f(" ",l(3,1,"orders.button.new")," "))}function Je(o,t){o&1&&(i(0,"a",25),C(1,"lucide-icon",26),a(2),d(3,"translate"),r()),o&2&&(n(2),f(" ",l(3,1,"orders.button.cart")," "))}function Ke(o,t){if(o&1){let e=y();i(0,"button",27),v("click",function(){b(e);let m=u();return O(m.clearSearch())}),C(1,"lucide-icon",28),r()}}function We(o,t){if(o&1){let e=y();i(0,"div",29)(1,"span"),a(2),d(3,"translate"),r(),i(4,"button",30),v("click",function(){b(e);let m=u();return O(m.bulkClear())}),a(5),d(6,"translate"),r()()}if(o&2){let e=u();n(2),h(" ",e.selectedOrders.size," ",l(3,3,"orders.bulk.selectionLabel")," "),n(3),f(" ",l(6,5,"orders.bulk.clean")," ")}}function Ye(o,t){if(o&1){let e=y();i(0,"th")(1,"input",31),v("change",function(){b(e);let m=u();return O(m.toggleSelectAll())}),r()()}if(o&2){let e=u();n(),p("checked",e.selectedOrders.size===e.filteredOrders.length)}}function Ze(o,t){if(o&1){let e=y();i(0,"td")(1,"input",31),v("change",function(){b(e);let m=u().$implicit,x=u();return O(x.toggleSelect(m.id))}),r()()}if(o&2){let e=u().$implicit,s=u();n(),p("checked",s.isSelected(e.id))}}function et(o,t){if(o&1){let e=y();i(0,"tr"),g(1,Ze,2,1,"td",21),i(2,"td")(3,"div",32)(4,"code"),a(5),d(6,"slice"),r(),i(7,"button",27),v("click",function(){let m=b(e).$implicit,x=u();return O(x.copyOrderId(m.id))}),C(8,"lucide-icon",33),r()()(),i(9,"td")(10,"div",34)(11,"strong"),a(12),d(13,"translate"),r(),i(14,"small"),a(15),r()()(),i(16,"td")(17,"span",35),a(18),r()(),i(19,"td"),a(20),d(21,"currency"),r(),i(22,"td"),a(23),d(24,"date"),r(),i(25,"td")(26,"a",36),a(27),d(28,"translate"),C(29,"lucide-icon",37),r()()()}if(o&2){let e=t.$implicit,s=u();ee("selected",s.isSelected(e.id)),n(),p("ngIf",s.isAdmin),n(4),f("#",A(6,12,e.id,0,8),""),n(7),f(" ",e.userName||l(13,16,"order.detail.userFallback")," "),n(3),c(e.userEmail||e.userId),n(2),p("ngClass",e.status.toLowerCase()),n(),c(e.status),n(2),c(S(21,18,e.totalAmount,e.currency)),n(3),c(S(24,21,e.createdAt,"short")),n(3),p("routerLink",re(26,He,e.id)),n(),f(" ",l(28,24,"orders.table.view")," ")}}function tt(o,t){if(o&1&&(i(0,"tr")(1,"td",38),a(2),d(3,"translate"),r()()),o&2){let e=u();n(),Z("colspan",e.isAdmin?7:6),n(),f(" ",l(3,2,"orders.empty")," ")}}var q=class o{constructor(t,e,s){this.ordersService=t;this.notificationService=e;this.authService=s}orders=[];filteredOrders=[];selectedOrders=new Set;searchQuery="";statusFilter="";isAdmin=!1;isStandardUser=!1;destroy$=new k;ngOnInit(){this.isAdmin=this.authService.hasAnyRole(["admin","portfolio_admin"]),this.isStandardUser=this.authService.hasRole("user")&&!this.isAdmin,this.ordersService.getOrders().pipe(M(this.destroy$)).subscribe(t=>{this.orders=t,this.applyFilters()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleSearch(t){this.searchQuery=t,this.applyFilters()}clearSearch(){this.searchQuery="",this.applyFilters()}onStatusChange(t){this.statusFilter=t,this.applyFilters()}applyFilters(){let t=this.searchQuery.trim().toLowerCase();this.filteredOrders=this.orders.filter(e=>{let s=this.statusFilter?e.status===this.statusFilter:!0,x=[e.id,e.userId,e.userName,e.userEmail,e.status].filter(Boolean).map(je=>je.toString().toLowerCase()).join(" ").includes(t);return s&&x})}toggleSelect(t){this.selectedOrders.has(t)?this.selectedOrders.delete(t):this.selectedOrders.add(t)}toggleSelectAll(){if(this.selectedOrders.size===this.filteredOrders.length){this.selectedOrders.clear();return}this.filteredOrders.forEach(t=>this.selectedOrders.add(t.id))}isSelected(t){return this.selectedOrders.has(t)}bulkClear(){this.selectedOrders.clear()}copyOrderId(t){navigator.clipboard?.writeText(t),this.notificationService.success("ID copiado al portapapeles")}static \u0275fac=function(e){return new(e||o)(_(F),_(de),_(U))};static \u0275cmp=I({type:o,selectors:[["app-order-list"]],decls:69,vars:63,consts:[[1,"orders-container"],[1,"page-header"],[1,"page-info"],[1,"eyebrow"],["class","btn btn-primary","routerLink","create",4,"ngIf"],["class","btn btn-secondary","routerLink","/cart",4,"ngIf"],[1,"filters-bar"],[1,"search-box"],["name","Search","size","16"],["type","search",3,"input","placeholder","value"],["class","btn-icon","type","button",3,"click",4,"ngIf"],[1,"filter-select",3,"change","value"],["value",""],["value","PENDING"],["value","CONFIRMED"],["value","SHIPPED"],["value","DELIVERED"],["value","CANCELLED"],["class","bulk-actions",4,"ngIf"],[1,"table-container"],[1,"orders-table"],[4,"ngIf"],[3,"selected",4,"ngFor","ngForOf"],["routerLink","create",1,"btn","btn-primary"],["name","Plus","size","18"],["routerLink","/cart",1,"btn","btn-secondary"],["name","ShoppingCart","size","18"],["type","button",1,"btn-icon",3,"click"],["name","X","size","14"],[1,"bulk-actions"],["type","button",1,"btn","btn-text",3,"click"],["type","checkbox",3,"change","checked"],[1,"order-id"],["name","Copy","size","14"],[1,"user-info"],[1,"status-chip",3,"ngClass"],[1,"btn","btn-text",3,"routerLink"],["name","ArrowRight","size","14"],[1,"empty-message"]],template:function(e,s){e&1&&(i(0,"section",0)(1,"div",1)(2,"div",2)(3,"p",3),a(4),d(5,"translate"),d(6,"translate"),r(),i(7,"h2"),a(8),d(9,"translate"),d(10,"translate"),r(),i(11,"p"),a(12),d(13,"translate"),d(14,"translate"),r()(),g(15,Xe,4,3,"a",4)(16,Je,4,3,"a",5),r(),i(17,"div",6)(18,"div",7),C(19,"lucide-icon",8),i(20,"input",9),d(21,"translate"),v("input",function(x){return s.handleSearch(x.target.value)}),r(),g(22,Ke,2,0,"button",10),r(),i(23,"select",11),v("change",function(x){return s.onStatusChange(x.target.value)}),i(24,"option",12),a(25),d(26,"translate"),r(),i(27,"option",13),a(28),d(29,"translate"),r(),i(30,"option",14),a(31),d(32,"translate"),r(),i(33,"option",15),a(34),d(35,"translate"),r(),i(36,"option",16),a(37),d(38,"translate"),r(),i(39,"option",17),a(40),d(41,"translate"),r()()(),g(42,We,7,7,"div",18),i(43,"div",19)(44,"table",20)(45,"thead")(46,"tr"),g(47,Ye,2,1,"th",21),i(48,"th"),a(49),d(50,"translate"),r(),i(51,"th"),a(52),d(53,"translate"),r(),i(54,"th"),a(55),d(56,"translate"),r(),i(57,"th"),a(58),d(59,"translate"),r(),i(60,"th"),a(61),d(62,"translate"),r(),i(63,"th"),a(64),d(65,"translate"),r()()(),i(66,"tbody"),g(67,et,30,28,"tr",22)(68,tt,4,4,"tr",21),r()()()()),e&2&&(n(4),f(" ",s.isAdmin?l(5,25,"orders.eyebrow.admin"):l(6,27,"orders.eyebrow.user")," "),n(4),f(" ",s.isAdmin?l(9,29,"orders.title.admin"):l(10,31,"orders.title.user")," "),n(4),f(" ",s.isAdmin?l(13,33,"orders.description.admin"):l(14,35,"orders.description.user")," "),n(3),p("ngIf",s.isAdmin),n(),p("ngIf",!s.isAdmin),n(4),p("placeholder",l(21,37,"orders.search.placeholder"))("value",s.searchQuery),n(2),p("ngIf",s.searchQuery),n(),p("value",s.statusFilter),n(2),c(l(26,39,"orders.status.all")),n(3),c(l(29,41,"orders.status.pending")),n(3),c(l(32,43,"orders.status.confirmed")),n(3),c(l(35,45,"orders.status.shipped")),n(3),c(l(38,47,"orders.status.delivered")),n(3),c(l(41,49,"orders.status.cancelled")),n(2),p("ngIf",s.isAdmin&&s.selectedOrders.size),n(5),p("ngIf",s.isAdmin),n(2),c(l(50,51,"orders.table.order")),n(3),c(l(53,53,"orders.table.user")),n(3),c(l(56,55,"orders.table.status")),n(3),c(l(59,57,"orders.table.total")),n(3),c(l(62,59,"orders.table.created")),n(3),c(l(65,61,"orders.table.actions")),n(3),p("ngForOf",s.filteredOrders),n(),p("ngIf",!s.filteredOrders.length))},dependencies:[L,P,E,Ie,Pe,ue,me,V,$,D,z],styles:[".orders-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding-bottom:48px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.75rem;letter-spacing:.2em;color:#6b7280}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:4px 0;font-size:32px}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6b7280}.filters-bar[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.filters-bar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:12px;border:1px solid #e5e7eb;border-radius:16px;padding:10px 14px;background:#fff}.filters-bar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;font-size:1rem}.filters-bar[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:16px;padding:10px 16px;background:#fff;font-size:1rem;color:#374151}.bulk-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-radius:16px;background:#eff6ff;color:#1e40af}.table-container[_ngcontent-%COMP%]{border-radius:24px;border:1px solid #f3f4f6;background:#fff;box-shadow:0 8px 20px #0f172a1f;overflow-x:auto}.orders-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .orders-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 20px;text-align:left}.orders-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f9fafb}.orders-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.75rem;letter-spacing:.2em;color:#6b7280;font-weight:600}.orders-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f3f4f6;transition:all .25s ease}.orders-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9fafb}.orders-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#eff6ff}.order-id[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px}.order-id[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;background:#f3f4f6;padding:2px 8px;border-radius:10px}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.user-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.user-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6b7280}.status-chip[_ngcontent-%COMP%]{padding:6px 12px;border-radius:999px;font-size:.75rem;font-weight:600;text-transform:uppercase}.status-chip.pending[_ngcontent-%COMP%]{background:#f59e0b26;color:#92400e}.status-chip.confirmed[_ngcontent-%COMP%], .status-chip.delivered[_ngcontent-%COMP%]{background:#10b98126;color:#065f46}.status-chip.cancelled[_ngcontent-%COMP%]{background:#ef444426;color:#dc2626}.status-chip.shipped[_ngcontent-%COMP%]{background:#3b82f626;color:#1d4ed8}.empty-message[_ngcontent-%COMP%]{text-align:center;color:#6b7280}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column}}"]})};function rt(o,t){if(o&1&&(i(0,"mat-list-item")(1,"div",9)(2,"div")(3,"p",10),a(4),d(5,"translate"),r(),i(6,"small"),a(7),d(8,"translate"),r()(),i(9,"div",11)(10,"span"),a(11),d(12,"translate"),r(),i(13,"span"),a(14),d(15,"translate"),d(16,"currency"),r()()()()),o&2){let e=t.$implicit,s=u().ngIf;n(4),f(" ",e.productName||l(5,7,"order.detail.productFallback")," "),n(3),h("",l(8,9,"order.detail.productId")," ",e.productId,""),n(4),h("",l(12,11,"order.detail.quantity"),": ",e.quantity,""),n(3),h("",l(15,13,"order.detail.price"),": ",S(16,15,e.price,s.currency),"")}}function nt(o,t){if(o&1&&(te(0),i(1,"section",1)(2,"mat-card",2)(3,"mat-card-title"),a(4),d(5,"translate"),d(6,"slice"),r(),i(7,"mat-card-subtitle"),a(8),d(9,"translate"),i(10,"span",3),a(11),r()(),i(12,"mat-card-content")(13,"div",4)(14,"div")(15,"p",5),a(16),d(17,"translate"),r(),i(18,"p",6),a(19),d(20,"translate"),r(),i(21,"small"),a(22),r()(),i(23,"div")(24,"p",5),a(25),d(26,"translate"),r(),i(27,"p",6),a(28),d(29,"currency"),r(),i(30,"small"),a(31),d(32,"translate"),d(33,"date"),r()()()()(),i(34,"mat-card",7)(35,"mat-card-title"),a(36),d(37,"translate"),r(),i(38,"mat-card-content")(39,"mat-list"),g(40,rt,17,18,"mat-list-item",8),r()()()(),ie()),o&2){let e=t.ngIf;n(4),h("",l(5,14,"order.detail.title")," #",A(6,16,e.id,0,8),""),n(4),f(" ",l(9,20,"orders.table.status"),": "),n(2),p("ngClass",e.status.toLowerCase()),n(),f(" ",e.status," "),n(5),c(l(17,22,"order.detail.customer")),n(3),f(" ",e.userName||l(20,24,"order.detail.userFallback")," "),n(3),c(e.userEmail||e.userId),n(3),c(l(26,26,"order.detail.total")),n(3),c(S(29,28,e.totalAmount,e.currency)),n(3),h("",l(32,31,"order.detail.created")," ",S(33,33,e.createdAt,"medium"),""),n(5),c(l(37,36,"order.detail.items")),n(4),p("ngForOf",e.items)}}var H=class o{constructor(t,e){this.route=t;this.ordersService=e}order$;ngOnInit(){this.order$=this.route.paramMap.pipe(Y(t=>this.ordersService.getOrder(t.get("id"))))}static \u0275fac=function(e){return new(e||o)(_(ce),_(F))};static \u0275cmp=I({type:o,selectors:[["app-order-detail"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"order-detail"],[1,"summary-card"],[1,"status-chip",3,"ngClass"],[1,"summary-grid"],[1,"label"],[1,"value"],[1,"items-card"],[4,"ngFor","ngForOf"],[1,"item-line"],[1,"item-name"],[1,"item-meta"]],template:function(e,s){e&1&&(g(0,nt,41,38,"ng-container",0),d(1,"async")),e&2&&p("ngIf",l(1,1,s.order$))},dependencies:[L,P,E,j,R,ge,G,we,ke,T,V,$,D,z],styles:[".order-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;padding:24px}.summary-card[_ngcontent-%COMP%], .items-card[_ngcontent-%COMP%]{border-radius:20px}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;margin-top:16px}.summary-grid[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.75rem;letter-spacing:.2em;color:#6b7280;margin-bottom:4px}.summary-grid[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.status-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 12px;border-radius:999px;font-size:.8rem;font-weight:600;text-transform:capitalize}.status-chip.pending[_ngcontent-%COMP%]{background:#f59e0b26;color:#b45309}.status-chip.confirmed[_ngcontent-%COMP%]{background:#10b98126;color:#047857}.status-chip.shipped[_ngcontent-%COMP%], .status-chip.delivered[_ngcontent-%COMP%]{background:#3b82f626;color:#1d4ed8}.status-chip.cancelled[_ngcontent-%COMP%]{background:#ef444426;color:#b91c1c}.item-line[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f3f4f6}.item-line[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-line[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{margin:0;font-size:1rem}.item-line[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#9ca3af}.item-line[_ngcontent-%COMP%]   .item-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;text-align:right;color:#4b5563}"]})};function ot(o,t){if(o&1&&(i(0,"mat-option",9),a(1),r()),o&2){let e=t.$implicit,s=u();p("value",e.id),n(),h(" ",s.displayUserLabel(e)," \xC2\xB7 ",e.email," ")}}function at(o,t){if(o&1&&(i(0,"mat-hint"),a(1),r()),o&2){let e,s=u();n(),f(" Pedido asociado a tu sesi\xF3n (",(e=s.authService.getProfile())==null?null:e.email,") ")}}function st(o,t){o&1&&(i(0,"mat-hint"),a(1," Selecciona cualquier usuario demo para simular la compra "),r())}function dt(o,t){if(o&1&&(i(0,"mat-option",9),a(1),r()),o&2){let e=t.$implicit;p("value",e.id),n(),f(" ",e.name," ")}}function lt(o,t){if(o&1){let e=y();i(0,"div",10)(1,"mat-form-field",11)(2,"mat-label"),a(3,"Producto"),r(),i(4,"mat-select",12),g(5,dt,2,2,"mat-option",3),d(6,"async"),r()(),i(7,"mat-form-field",11)(8,"mat-label"),a(9,"Cantidad"),r(),C(10,"input",13),r(),i(11,"mat-form-field",11)(12,"mat-label"),a(13,"Precio estimado"),r(),C(14,"input",14),r(),i(15,"button",15),v("click",function(){let m=b(e).index,x=u();return O(x.removeItem(m))}),i(16,"mat-icon"),a(17,"delete"),r()()()}if(o&2){let e=t.index,s=u();p("formGroupName",e),n(5),p("ngForOf",l(6,2,s.products$))}}var X=class o{constructor(t,e,s,m,x){this.fb=t;this.ordersService=e;this.catalogService=s;this.usersService=m;this.authService=x}orderForm;products$;products=[];users=[];matchedUserEmail=!1;destroy$=new k;ngOnInit(){this.orderForm=this.fb.group({userId:["",w.required],items:this.fb.array([this.buildItem()])}),this.products$=K([]),this.catalogService.getProducts().pipe(M(this.destroy$)).subscribe(t=>{this.products=t,this.products$=K(t)}),this.registerPriceUpdater(this.items.at(0)),this.usersService.getUsers().pipe(M(this.destroy$)).subscribe(t=>{this.users=t,this.prefillUser()})}get items(){return this.orderForm.get("items")}buildItem(){return this.fb.group({productId:["",w.required],quantity:[1,[w.required,w.min(1)]],price:[{value:0,disabled:!0}]})}addItem(){this.items.push(this.buildItem()),this.registerPriceUpdater(this.items.at(this.items.length-1))}removeItem(t){this.items.removeAt(t)}submit(){if(this.orderForm.invalid){this.orderForm.markAllAsTouched();return}let t={userId:this.orderForm.value.userId,items:this.orderForm.value.items.map(e=>({productId:e.productId,quantity:Number(e.quantity)}))};this.ordersService.createOrder(t).subscribe()}registerPriceUpdater(t){t.get("productId")?.valueChanges.pipe(M(this.destroy$)).subscribe(e=>{let s=this.products.find(m=>m.id===e);s&&t.patchValue({price:s.price},{emitEvent:!1})})}prefillUser(){if(!this.users.length)return;let t=this.authService.getProfile()?.email?.toLowerCase(),e=t?this.users.find(m=>m.email?.toLowerCase()===t):void 0,s=e??this.users[0];this.matchedUserEmail=!!e,this.orderForm.patchValue({userId:s.id},{emitEvent:!1})}displayUserLabel(t){if(!t)return"";let e=t.fullName?.trim();return e?.length?e:`${t.firstName??""} ${t.lastName??""}`.trim()||t.email}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||o)(_(Ee),_(F),_(le),_(pe),_(U))};static \u0275cmp=I({type:o,selectors:[["app-order-create"]],decls:19,vars:5,consts:[[1,"order-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["formControlName","userId"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formArrayName","items"],["class","item-row",3,"formGroupName",4,"ngFor","ngForOf"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit"],[3,"value"],[1,"item-row",3,"formGroupName"],["appearance","outline"],["formControlName","productId"],["matInput","","type","number","formControlName","quantity"],["matInput","","formControlName","price","readonly",""],["mat-icon-button","","type","button",3,"click"]],template:function(e,s){e&1&&(i(0,"form",0),v("ngSubmit",function(){return s.submit()}),i(1,"mat-card")(2,"mat-card-title"),a(3,"Nuevo pedido"),r(),i(4,"mat-card-content")(5,"mat-form-field",1)(6,"mat-label"),a(7,"Usuario del pedido"),r(),i(8,"mat-select",2),g(9,ot,2,3,"mat-option",3),r(),g(10,at,2,1,"mat-hint",4)(11,st,2,0,"mat-hint",4),r(),i(12,"div",5),g(13,lt,18,4,"div",6),r(),i(14,"button",7),v("click",function(){return s.addItem()}),a(15," A\xC3\xB1adir producto "),r()(),i(16,"mat-card-actions")(17,"button",8),a(18," Guardar pedido "),r()()()()),e&2&&(p("formGroup",s.orderForm),n(9),p("ngForOf",s.users),n(),p("ngIf",s.matchedUserEmail),n(),p("ngIf",!s.matchedUserEmail),n(2),p("ngForOf",s.items.controls))},dependencies:[P,E,he,xe,be,ve,Ce,Oe,Me,ye,Se,ae,se,fe,j,_e,R,G,Ae,Be,Ne,Le,Te,oe,T],styles:[".order-form[_ngcontent-%COMP%]{padding:1rem}.order-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.order-form[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center;margin-bottom:1rem}.order-form[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}"]})};var pt=[{path:"",component:q},{path:"create",component:X},{path:":id",component:H}],J=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=N({type:o});static \u0275inj=B({imports:[W.forChild(pt),W]})};var ze=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=N({type:o});static \u0275inj=B({imports:[ne,Fe,De,J]})};export{ze as OrdersModule};
