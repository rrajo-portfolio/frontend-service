import{a,b as o,h as c,x as n}from"./chunk-PRE4TB56.js";var m=class s{storageKey="portfolio.cart";itemsSubject=new c(this.load());items$=this.itemsSubject.asObservable();addProduct(t){let e=[...this.itemsSubject.value],r=e.find(i=>i.productId===t.id);r?r.quantity+=1:e.push({productId:t.id,productName:t.name,price:t.price,currency:t.currency,quantity:1}),this.persist(e)}updateQuantity(t,e){let r=this.itemsSubject.value.map(i=>i.productId===t?o(a({},i),{quantity:Math.max(1,e)}):i);this.persist(r)}remove(t){let e=this.itemsSubject.value.filter(r=>r.productId!==t);this.persist(e)}clear(){this.persist([])}getSnapshot(){return this.itemsSubject.value}load(){try{let t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):[]}catch{return[]}}persist(t){this.itemsSubject.next(t),localStorage.setItem(this.storageKey,JSON.stringify(t))}static \u0275fac=function(e){return new(e||s)};static \u0275prov=n({token:s,factory:s.\u0275fac,providedIn:"root"})};export{m as a};
